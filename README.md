<div align="center">

![QuranBot Banner](<images/BANNER%20(ANIMATED).gif>)

# üïå QuranBot

**A Discord Bot for 24/7 Quran Audio Streaming with Interactive Control Panel**

[![Version](https://img.shields.io/badge/version-3.0.0-blue.svg)](#)
[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![No Support](https://img.shields.io/badge/support-NONE-red.svg)](#)
[![Muslim Ummah](https://img.shields.io/badge/built%20for-Muslim%20Ummah-green.svg)](#)

_Built with ‚ù§Ô∏è for the Muslim Ummah - Shared as-is for educational purposes_

</div>

---

## üìù Version History

### Latest Release: v3.0.0 (2025-07-08)

Major release with complete quiz system overhaul, leaderboard improvements, enhanced daily verses, and robust error handling.

**Key Features:**

- üìù Dynamic quiz system with real-time updates
- üèÜ Points-based leaderboard with streaks
- üìä Enhanced daily verses scheduling
- üõ°Ô∏è Comprehensive error handling
- üé® Polished UI/UX across all features

### Previous Versions

#### v2.3.2 (2025-01-07)

- ‚ú® Enhanced credits command spacing and readability
- üì± Improved visual separators in embeds
- üé® Maintained clean, professional design

#### v2.3.1 (2025-01-07)

- üìñ Fixed truncated verses in daily verse database
- ‚úÖ Complete Arabic text and translations
- üîç Eliminated truncation issues

#### v2.3.0 (2025-01-07)

- ‚ö° Fixed command registration and timing
- üïê Added EST timezone support
- üë§ Enhanced embed styling with profile pictures

[View Full Changelog](CHANGELOG.md)

---

## ‚ö†Ô∏è No Support Policy

> **üö® CRITICAL NOTICE: "TAKE AS IT IS" PROJECT**
>
> This repository is provided **AS-IS** with **ZERO SUPPORT**. It is shared for educational and reference purposes only.

**What this means:**

- ‚ùå **No bug reports** will be addressed
- ‚ùå **No feature requests** will be considered
- ‚ùå **No setup assistance** will be provided
- ‚ùå **No pull requests** will be reviewed
- ‚ùå **No issues** will be responded to
- ‚ùå **No documentation updates** will be made
- ‚ùå **No security patches** will be released

**‚úÖ What you CAN do:**

- Fork the repository and modify it yourself
- Study the code for educational purposes
- Use it as a reference for your own projects
- Learn Discord bot development patterns

**Use at your own risk and responsibility.**

---

## üåü Features

### üéµ **Audio Streaming**

- üéµ **24/7 Audio Streaming** - Continuous Quran recitation in voice channels
- üéØ **Multiple Reciters** - Support for 6 renowned Qaris with Arabic names
- üîÑ **Auto-Reconnection** - Automatic reconnection on voice disconnects
- üìñ **Beautiful Surah Names** - Displays chapters with emojis and Arabic transliterations

### üéõÔ∏è **Interactive Control Panel**

- üì± **Discord Control Panel** - Interactive control panel with buttons and dropdowns
- üéÆ **Surah Selection** - Browse and select from all 114 Surahs with pagination
- üé§ **Reciter Selection** - Switch between different Qaris on-demand
- ‚è≠Ô∏è **Playback Controls** - Previous/Next track navigation
- üîÅ **Loop & Shuffle** - Toggle loop and shuffle modes with visual feedback
- üìä **Real-time Progress** - Live progress tracking with time display and percentage
- üë§ **Last Activity Tracking** - Shows who last interacted with the bot and when

### üîß **Advanced Features**

- üíæ **State Management** - Automatically saves and resumes playback position
- üîÑ **Smart Resume** - Intelligently resumes from where you left off
- üìä **Session Statistics** - Tracks bot usage and session information
- üõ°Ô∏è **Instance Management** - Prevents multiple bot instances running simultaneously
- üìù **Comprehensive Logging** - Tree-style structured logging with timestamps
- üóÇÔ∏è **File-based Logging** - Organized logs by date with JSON and text formats

### ‚ö° **Performance & Reliability**

- üöÄ **Optimized Performance** - Efficient audio streaming and memory management
- üîß **Easy Configuration** - Environment-based configuration management
- üõ°Ô∏è **Error Handling** - Comprehensive error handling with recovery mechanisms
- üìà **Resource Monitoring** - Built-in resource usage monitoring

### üõ°Ô∏è **Data Protection & Backup**

- üíæ **Bulletproof Data Protection** - 5-layer protection system for all data files
- üì¶ **Automated ZIP Backups** - EST-scheduled hourly backups with date/time naming
- üîÑ **Atomic File Operations** - Corruption-proof saves with automatic recovery
- üö® **Emergency Backup System** - Multiple fallback mechanisms for data safety
- üóÇÔ∏è **Perfect Tree Logging** - Comprehensive backup logging with full visibility

### üéØ **Enhanced Audio Management**

- üîç **Missing Surah Detection** - Automatic detection and logging of incomplete reciter collections
- üîÑ **Smart Looping** - Default looping enabled for continuous playback
- üìä **Audio File Indexing** - Intelligent mapping of surah numbers to available files
- üéµ **Reciter Collection Analysis** - Complete analysis of available audio files per reciter

### üß† **Quiz System**

- üìù **Dynamic Quiz Embeds** - Real-time updates as users answer
- üèÜ **Public Results Panel** - Shows correct/incorrect users and correct answer
- üî• **Streak & Points Tracking** - Tracks user streaks and points instantly
- üèÖ **Instant Leaderboard Updates** - Leaderboard reflects latest results immediately
- üõ°Ô∏è **Robust Error Handling** - Handles deleted messages, Discord API errors, and more
- üå≤ **Comprehensive Logging** - Perfect tree logging for all quiz actions

### üèÜ **Leaderboard**

- üìä **Points-Based Sorting** - Sorted by quiz points, shows streak and listening time
- üßπ **Clean Footer** - Only shows creator credits
- ‚ö° **Instant Updates** - Always up to date after each quiz

### üõ°Ô∏è **Stability & Logging**

- üå≤ **Perfect Tree Logging** - For all major systems and errors
- üõ°Ô∏è **Traceback Logging** - For all exceptions and Discord errors
- üõ†Ô∏è **Consistent Error Handling** - Across all commands and background tasks

## üöÄ Quick Start

### Prerequisites

- Python 3.8 or higher
- FFmpeg installed and accessible
- Discord Bot Token
- Voice channel permissions in your Discord server

### Installation

1. **Clone the Repository**

   ```bash
   git clone https://github.com/trippixn963/QuranBot.git
   cd QuranBot
   ```

2. **Install Dependencies**

   ```bash
   pip install -r requirements.txt
   ```

3. **Install FFmpeg**

   **macOS (Homebrew):**

   ```bash
   brew install ffmpeg
   ```

   **Ubuntu/Debian:**

   ```bash
   sudo apt update
   sudo apt install ffmpeg
   ```

   **Windows:** Download from https://ffmpeg.org/download.html

4. **Configure Environment**

   ```bash
   # Copy example configuration
   cp config/.env.example config/.env

   # Edit config/.env with your Discord credentials
   nano config/.env  # or use your preferred editor
   ```

5. **Add Audio Files**

   Place 114 Quran MP3 files (numbered 001.mp3 to 114.mp3) in:

   ```
   audio/Saad Al Ghamdi/
   ‚îú‚îÄ‚îÄ 001.mp3  # üïå Al-Fatiha (The Opening)
   ‚îú‚îÄ‚îÄ 002.mp3  # üêÑ Al-Baqarah (The Cow)
   ‚îú‚îÄ‚îÄ 003.mp3  # üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Aal-Imran (The Family of Imran)
   ‚îî‚îÄ‚îÄ ... (continue to 114.mp3)
   ```

6. **Run the Bot**

   ```bash
   python main.py
   ```

## üìÅ Project Structure

```
QuranBot/
‚îú‚îÄ‚îÄ üìÅ src/                     # Core application code
‚îÇ   ‚îú‚îÄ‚îÄ bot/main.py            # Main Discord bot implementation
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tree_log.py        # Advanced logging system
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ surah_mapper.py    # Surah name mapping with emojis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ control_panel.py   # Interactive Discord control panel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ state_manager.py   # Playback state persistence
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ audio_manager.py   # Audio streaming management
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rich_presence.py   # Discord rich presence
‚îÇ   ‚îî‚îÄ‚îÄ config/                # Configuration modules
‚îú‚îÄ‚îÄ üìÅ config/                  # Configuration files
‚îÇ   ‚îú‚îÄ‚îÄ .env.example           # Environment variables template
‚îÇ   ‚îî‚îÄ‚îÄ pyproject.toml         # Python project configuration
‚îú‚îÄ‚îÄ üìÅ data/                    # Persistent data storage
‚îÇ   ‚îú‚îÄ‚îÄ playback_state.json    # Current playback position
‚îÇ   ‚îî‚îÄ‚îÄ bot_stats.json         # Bot usage statistics
‚îú‚îÄ‚îÄ üìÅ audio/                   # Quran audio files
‚îÇ   ‚îú‚îÄ‚îÄ Saad Al Ghamdi/        # Default reciter
‚îÇ   ‚îú‚îÄ‚îÄ Rashid Al Afasy/       # Alternative reciter
‚îÇ   ‚îî‚îÄ‚îÄ ... (other reciters)
‚îú‚îÄ‚îÄ üìÅ images/                  # Visual assets
‚îú‚îÄ‚îÄ üìÅ logs/                    # Organized log files by date
‚îú‚îÄ‚îÄ main.py                    # üöÄ Main entry point - START HERE
‚îú‚îÄ‚îÄ bot_manager.py             # üõ†Ô∏è Bot instance management utility
‚îú‚îÄ‚îÄ requirements.txt           # üì¶ Python dependencies
‚îî‚îÄ‚îÄ CHANGELOG.md               # üìù Version history
```

## ‚öôÔ∏è Configuration

### Discord Bot Setup

1. **Create Discord Application**

   - Go to https://discord.com/developers/applications
   - Create new application
   - Go to "Bot" section and create bot
   - Copy the bot token

2. **Get Required IDs**

   - Enable Developer Mode in Discord (Settings > Advanced > Developer Mode)
   - Right-click your server ‚Üí Copy ID (GUILD_ID)
   - Right-click voice channel ‚Üí Copy ID (TARGET_CHANNEL_ID)
   - Right-click control panel channel ‚Üí Copy ID (CONTROL_PANEL_CHANNEL_ID)
   - Right-click your user ‚Üí Copy ID (ADMIN_USER_ID)

3. **Configure Environment**

   Edit `config/.env` with your Discord credentials:

   ```env
   # Required Settings
   DISCORD_TOKEN=your_discord_bot_token_here
   GUILD_ID=your_discord_server_id_here
   TARGET_CHANNEL_ID=your_voice_channel_id_here
   CONTROL_PANEL_CHANNEL_ID=your_control_panel_channel_id_here
   ADMIN_USER_ID=your_discord_user_id_here
   ```

## üéµ Audio Setup

Place your Quran audio files in the `audio/` directory organized by reciter:

```
audio/
‚îú‚îÄ‚îÄ Saad Al Ghamdi/            # ÿ≥ÿπÿØ ÿßŸÑÿ∫ÿßŸÖÿØŸä
‚îÇ   ‚îú‚îÄ‚îÄ 001.mp3  # üïå Al-Fatiha (The Opening)
‚îÇ   ‚îú‚îÄ‚îÄ 002.mp3  # üêÑ Al-Baqarah (The Cow)
‚îÇ   ‚îú‚îÄ‚îÄ 036.mp3  # üíö Ya-Sin (Ya-Sin)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ Rashid Al Afasy/           # ÿ±ÿßÿ¥ÿØ ÿßŸÑÿπŸÅÿßÿ≥Ÿä
‚îÇ   ‚îú‚îÄ‚îÄ 001.mp3
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ Abdul Basit Abdul Samad/   # ÿπÿ®ÿØ ÿßŸÑÿ®ÿßÿ≥ÿ∑ ÿπÿ®ÿØ ÿßŸÑÿµŸÖÿØ
‚îÇ   ‚îú‚îÄ‚îÄ 001.mp3
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ Other Reciters/
    ‚îî‚îÄ‚îÄ ...
```

### Supported Reciters

The bot supports these renowned Qaris with Arabic names:

- **Saad Al Ghamdi** / ÿ≥ÿπÿØ ÿßŸÑÿ∫ÿßŸÖÿØŸä
- **Rashid Al Afasy** / ÿ±ÿßÿ¥ÿØ ÿßŸÑÿπŸÅÿßÿ≥Ÿä
- **Maher Al Muaiqly** / ŸÖÿßŸáÿ± ÿßŸÑŸÖÿπŸäŸÇŸÑŸä
- **Muhammad Al Luhaidan** / ŸÖÿ≠ŸÖÿØ ÿßŸÑŸÑÿ≠ŸäÿØÿßŸÜ
- **Abdul Basit Abdul Samad** / ÿπÿ®ÿØ ÿßŸÑÿ®ÿßÿ≥ÿ∑ ÿπÿ®ÿØ ÿßŸÑÿµŸÖÿØ
- **Yasser Al Dosari** / Ÿäÿßÿ≥ÿ± ÿßŸÑÿØŸàÿ≥ÿ±Ÿä

## üéõÔ∏è Control Panel Features

The interactive Discord control panel provides:

### üì± **Real-time Display**

- **Current Surah:** Shows both English and Arabic names
- **Current Reciter:** Displays reciter with Arabic name
- **Progress Tracking:** Live time display and progress bar
- **Bot Thumbnail:** Shows bot's profile picture

### üéÆ **Interactive Controls**

- **‚¨ÖÔ∏è Prev Page / ‚û°Ô∏è Next Page:** Navigate surah selection pages
- **‚èÆÔ∏è Previous / ‚è≠Ô∏è Next:** Skip to previous/next surah
- **üîÅ Loop / üîÄ Shuffle:** Toggle playback modes with visual feedback
- **üïå Surah Dropdown:** Select from all 114 surahs with emojis
- **üé§ Reciter Dropdown:** Switch between available reciters

### üìä **Smart Features**

- **Last Activity Tracking:** Shows who last used the bot and when
- **State Persistence:** Remembers position across restarts
- **Progress Clamping:** Prevents impossible time values
- **Dynamic Updates:** Real-time updates every 5 seconds

## üíæ State Management

The bot automatically saves and restores:

- **Current Surah Position:** Exact playback position
- **Selected Reciter:** Currently active reciter
- **Playback Settings:** Loop and shuffle preferences
- **Session Statistics:** Usage tracking and session data

State files are stored in the `data/` directory:

- `playback_state.json` - Current playback position
- `bot_stats.json` - Bot usage statistics

## üõ†Ô∏è Bot Management

Basic bot management using the included utility:

```bash
# Check if bot is running
python bot_manager.py status

# Stop the bot
python bot_manager.py stop

# Start the bot
python main.py
```

## üìä Logging System

The bot features a beautiful tree-style logging system:

```
================================================================================
üöÄ NEW BOT RUN STARTED
================================================================================
üéØ QuranBot v2.2.1 - Run ID: B331F430
‚îú‚îÄ started_at: [07/05 10:28 PM EST]
‚îú‚îÄ version: 2.2.1
‚îú‚îÄ run_id: B331F430
‚îî‚îÄ log_session: 2025-07-05

üéµ Rich Presence Manager Initialization
‚îú‚îÄ ffmpeg_path: /opt/homebrew/bin/ffmpeg
‚îî‚îÄ initialization: ‚úÖ Rich Presence Manager ready

üé∂ Progress (11/114)
‚îú‚îÄ surah: 011. üèòÔ∏è Hud (ŸáŸàÿØ) - 123 verses
```

### Log Files

All logs are automatically saved to:

- `logs/YYYY-MM-DD/YYYY-MM-DD.log` - Human-readable text logs
- `logs/YYYY-MM-DD/YYYY-MM-DD.json` - Structured JSON logs
- `logs/YYYY-MM-DD/YYYY-MM-DD-errors.log` - Error-only logs

## üö® Important Notes

- **Single Guild Only:** This bot is designed for use in ONE Discord server only
- **Audio Files:** You must provide your own Quran MP3 files (114 files, numbered 001.mp3 to 114.mp3)
- **Security:** Keep your bot token secure and never share it publicly
- **Control Panel:** Set up a dedicated channel for the control panel
- **Permissions:** Ensure the bot has proper permissions in all required channels

## üìö Dependencies

- `discord.py>=2.3.0` - Discord API wrapper
- `PyNaCl>=1.5.0` - Voice support
- `python-dotenv>=1.0.0` - Environment variable management
- `psutil>=5.9.0` - Process monitoring for instance management
- `pytz>=2023.3` - Timezone handling for logging

## üõ°Ô∏è Security

- ‚úÖ Environment-based configuration
- ‚úÖ No sensitive data in repository
- ‚úÖ Comprehensive .gitignore for security
- ‚úÖ Instance management prevents conflicts
- ‚úÖ Secure token handling
- ‚úÖ State file encryption ready

## üìã Version History

### v2.3.2 (Latest)

### v2.3.1

### v2.3.0

- **‚ö° Command Registration - Fixed /verse command registration and initialization timing**
- **üïê EST Timezone Support - Added EST timezone support for all verse timers**
- **üë§ Admin Profile Integration - Enhanced daily verse embeds with admin profile picture in footer**
- **üì± Message ID Tracking - Improved /verse command response with message ID tracking**
- **üõ°Ô∏è Enhanced Error Handling - Better error handling and user feedback**

### v2.2.1

### v2.2.0

- **üõ°Ô∏è Bulletproof Data Protection - Implemented 5-layer protection system for all data files**
- **üì¶ Automated ZIP Backup System - EST-scheduled hourly backups with intuitive date/time naming (e.g., "7/6 - 10PM.zip")**
- **üîç Missing Surah Detection - Automatic detection and logging of incomplete reciter collections with range formatting**
- **üéØ Enhanced Audio Management - Intelligent mapping of surah numbers to available files with comprehensive analysis**
- **üóÇÔ∏è Perfect Tree Logging - Complete backup logging with full visibility into all operations**
- **üîÑ Smart Looping - Default looping enabled for continuous playback experience**
- **üìä Audio File Indexing - Intelligent surah-to-file mapping with missing file detection**
- **üö® Emergency Backup System - Multiple fallback mechanisms for critical data protection**
- **üîÑ Atomic File Operations - Corruption-proof saves with automatic recovery mechanisms**

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- Built for the Muslim community
- Inspired by the beauty of Quran recitation
- Developed with modern Python best practices
- Enhanced with interactive Discord features

## üìã Repository Information

### üìÅ **Important Files**

- üìñ [**Contributing Guidelines**](CONTRIBUTING.md) - How to contribute (educational purposes)
- üîí [**Security Policy**](SECURITY.md) - Security information and disclaimers
- üìã [**Issue Templates**](.github/ISSUE_TEMPLATE/) - Bug reports and feature requests
- üîç [**CodeQL Analysis**](.github/workflows/codeql.yml) - Automated security scanning
- üö´ [**Gitignore**](.gitignore) - Comprehensive Python/Discord bot gitignore

### üè∑Ô∏è **Repository Stats**

- **Language**: Python 3.11+
- **Framework**: Discord.py 2.3+
- **Audio Engine**: FFmpeg
- **Architecture**: Modular, object-oriented
- **Logging**: Custom tree-structured system
- **UI System**: Discord embeds and components

### üéì **Educational Value**

This repository demonstrates professional Discord bot development:

- ‚úÖ **Clean Architecture** - Modular design with separation of concerns
- ‚úÖ **Error Handling** - Comprehensive exception management
- ‚úÖ **Logging Systems** - Professional logging patterns
- ‚úÖ **State Management** - Persistent application state
- ‚úÖ **UI/UX Design** - Modern Discord interface components
- ‚úÖ **Audio Processing** - Real-time streaming implementation
- ‚úÖ **Security Practices** - Environment-based configuration

---

<div align="center">

### üîó **Quick Links**

[![GitHub](https://img.shields.io/badge/GitHub-Repository-black?logo=github)](https://github.com/trippixn963/QuranBot)
[![License](https://img.shields.io/badge/License-MIT-green?logo=opensourceinitiative)](LICENSE)
[![Contributing](https://img.shields.io/badge/Contributing-Guidelines-blue?logo=github)](CONTRIBUTING.md)
[![Security](https://img.shields.io/badge/Security-Policy-red?logo=security)](SECURITY.md)

**May Allah bless this project and all who use it** ü§≤

_"And it is He who sends down rain from the sky, and We produce thereby the vegetation of every kind"_ - Quran 6:99

<br>

![QuranBot Logo](<images/PFP%20(Cropped%20-%20Animated).gif>)

**üö® Remember: This is a "TAKE AS IS" project with NO SUPPORT**

</div>
